<%- include('../common/header') %>
  <%- include('../common/sidebar') %>
  <style>
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 25px;
    }
    
    .switch input { 
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      -webkit-transition: .4s;
      transition: .4s;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 15px;
      width: 15px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      -webkit-transition: .4s;
      transition: .4s;
    }
    
    input:checked + .slider {
      background-color: #2196F3;
    }
    
    input:focus + .slider {
      box-shadow: 0 0 1px #2196F3;
    }
    
    input:checked + .slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }
    
    /* Rounded sliders */
    .slider.round {
      border-radius: 34px;
    }
    
    .slider.round:before {
      border-radius: 50%;
    }
    </style>

    <!-- BEGIN: Content-->
    <div class="app-content content ">
      <div class="content-wrapper container-xxl p-0">
        <div class="content-body">
          <section id="multiple-column-form">
            <div class="row justify-content-center">
              <div class="col-md-10 col-12 ">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title"> Add Activity</h4>
                  </div>
              
                  <div class="card-body" style="margin-top: 15px;" >
                    <form class="form form-vertical" action="/postActivity" method="POST" id="profile"
                      enctype="multipart/form-data">
                      <div class="mb-1 row">
                        <div class="col-sm-2">
                          <label class="col-form-label new_lable" for="name">Activity Name</label>
                        </div>
                        <div class="col-sm-10">
                          <input type="text" id="activity_name" class="form-control" name="activity_name" value="" required>
                        </div>
                      </div>
                      <div class="mb-1 row">
                        <div class="col-sm-2">
                          <label class="col-form-label new_lable" for="price">Image</label>
                        </div>
                        <div class="col-sm-10">
                          <input type="file" id="image" name="image" accept="image/*" class="form-control" name="image" value="" required>
                        </div>
                      </div>
                      <div class="mb-1 row">
                        <div class="col-sm-2">
                          <label class="col-form-label new_lable" for="price">Background color</label>
                        </div>
                        <div class="col-sm-2" style="margin-top: 5px;" >
                          <input type="color" id="bg_color" style="padding: revert" class="form-control" name="bg_color" value="" required>
                        </div>
                      </div>
                      <div class="mb-1 row">
                        <div class="col-sm-2">
                            <label class="col-form-label new_lable" for="is_amount">Amount</label>
                        </div>
                        <div class="col-sm-10">
                            <div class="form-check form-switch">
                                <label class="switch">
                                    <input type="checkbox" id="is_amount" class="form-check-input" name="is_amount">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-1 row">
                        <div class="col-sm-2">
                            <label class="col-form-label new_lable" for="is_duration">Duration</label>
                        </div>
                        <div class="col-sm-10">
                            <div class="form-check form-switch">
                                <label class="switch">
                                    <input type="checkbox" id="is_duration" class="form-check-input" name="is_duration">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                      <div class="col-12">
                        <div class="col-sm-9 offset-sm-5">
                          <button type="submit"
                            class="btn btn-primary waves-effect waves-float waves-light">Add</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>
    <%- include('../common/footer') %>

    <script>
      $(document).ready(function () {

        jQuery.validator.addMethod("noSpace", function (value, element) {
          return value == '' || value.trim().length != 0;
        }, "No space please and don't leave it empty");

        $('#profile').validate({
          rules: {
            activity_name: {
              required: true,
              noSpace: true,
              maxlength: 60
            },
          },

          errorElement: "div",
          errorClass: "jqval-error",
          errorPlacement: function (error, element) {
            error.insertAfter(element);
            error.slideDown(400);
            error.animate({
              opacity: 1
            }, {
              queue: false,
              duration: 700
            });
          },

          submitHandler: function (form) {
            var error = $(".assign_error_div").text();
            if (!error) {
              form.submit();
            }
          }
        });
      });
    </script>

<style>
  /* Style for the checkbox */
  .form-check-input[type="checkbox"] {
    width: 20px;
    height: 20px;
    background-color: #ffffff; /* Dark color */
    border: 1px solid #333; /* Same color as background initially */
    border-radius: 4px;
  }

  /* Style for the checkbox when checked */
  .form-check-input[type="checkbox"]:checked {
    background-color: #204783; /* Darker color when checked */
  }

  /* Style for the label */
  .form-check-label {
    color: #333; /* Dark color */
  }
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        function handleToggleChange() {
            let amountChecked = $('#is_amount').is(':checked') ? 1 : 0;
            let durationChecked = $('#is_duration').is(':checked') ? 1 : 0;

            $.ajax({
                url: '/save-toggle-values', // Update with your server endpoint
                type: 'POST',
                data: JSON.stringify({
                    is_amount: amountChecked,
                    is_duration: durationChecked
                }),
                contentType: 'application/json',
                success: function(response) {
                    console.log('Values saved successfully:', response);
                },
                error: function(xhr, status, error) {
                    console.error('Error saving values:', error);
                }
            });
        }

        $('#is_amount, #is_duration').on('change', handleToggleChange);
    });
</script>

