<%- include('../common/header') %>
<%- include('../common/sidebar') %>

<!-- BEGIN: Content-->
<div class="app-content content ">
  <div class="content-wrapper container-xxl p-0">
    <div class="content-header row"></div>
    <div class="content-body">
      <div class="main-content">
        <section class="section">
          <div class="section-header">
            <h1>Dashboard</h1>
          </div>
          <br>
          <div class="row">
            <% if (session.role == 3) {%>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/userList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=users%>
                      </h2>
                      <p class="card-text">Users</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg viewBox="-5 5 70 75" xmlns="http://www.w3.org/2000/svg" version="1.1">
                          <path style="fill:#427794;stroke:#2A424F" d="M 22,43 C 18,48 6.5,45 4.2,56 2,62 2,81 14,79 13,64 12,57 12,57 c 0,0 1,14 2,21 9,4 24,4 35,-1 0,-8 -1,-13 0,-18 0,-5 0,19 0,19 0,0 6,2 8,-5 3,-10 5,-24 -9,-28 -9,-1 -7,-2 -8,-2 -2,0 -18,0 -18,0 z"/>
                          <path style="fill:#C29B82;stroke:#693311" d="m 23,38 c 0,0 1,3 -1,5 3,4 11,8 18,0 -1,-2 -1,-2 -1,-5 0,0 -16,0 -16,0 z"/>
                          <path style="fill:#CDA68E;stroke:#693311" d="M 31,42 C 17,42 7.6,4.8 31,4.2 55,4.1 44,42 31,42 z"/>
                          <path style="fill:#553932;stroke:#311710" d="M 17,26 C 14,16 14,3.2 31,2.4 44,3.1 49,15 44,26 44,21 45,19 43,16 39,15 33,16 28,11 27,15 15,13 17,26 z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/Goal_List' " style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=weekly_goals%>
                      </h2>
                      <p class="card-text">Weekly Goals</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg fill="#000000" viewBox="0 0 24 24" id="goal" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color">
                          <path id="secondary" d="M15,9l-2.5,2.5M15,6V9h3l3-3H18V3Z" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                          <path id="primary" d="M12.33,3H12a9,9,0,1,0,9,9c0-.11,0-.22,0-.33" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                          <path id="primary-2" data-name="primary" d="M16.9,13A5,5,0,1,1,11,7.1" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="card card-body h-100">
                    <h3 class="m-b-0">Users</h3>
                    <div id="chart01" class="w-100"></div>
                  </div>
                </div>
                <!-- <div class="col-md-6">
                  <div class="card card-body h-100">
                    <h3 class="m-b-0">Baby</h3>
                    <div id="chart02" class="w-100"></div>
                  </div>
                </div> -->
              </div>
              
              <%}else{%>

              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/sub_admin_list'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=sub_admin%>
                      </h2>
                      <p class="card-text">Sub Admin</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 0 24 24" overflow="visible" xml:space="preserve">
                      <g ><g transform="translate(4.000000, 1.000000)">
                          <path fill="#ffffff" d="M8,0l-9,4v6c0,5.6,3.8,10.7,9,12c5.2-1.3,9-6.4,9-12V4L8,0z M8,11h7c-0.5,4.1-3.3,7.8-7,8.9V11l-7,0V5.3
                            l7-3.1V11z"/>
                          <path fill="#ffffff" d="M8,0v22c5.2-1.3,9-6.4,9-12V4L8,0z M15,11c-0.5,4.1-3.3,7.8-7,8.9V11L15,11z"/>
                          <path fill-rule="evenodd" fill="#3367D6" d="M17,11h-2c0,0,0,0.3-0.1,0.6L17,11z"/>
                          <polygon fill-rule="evenodd" fill="#3367D6" points="-1,11 1,11 1,10.4 		"/>
                        </g>
                      </g>
                      </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/userList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=users%>
                      </h2>
                      <p class="card-text">Users</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg viewBox="-5 5 70 75" xmlns="http://www.w3.org/2000/svg" version="1.1">
                          <path style="fill:#427794;stroke:#2A424F" d="M 22,43 C 18,48 6.5,45 4.2,56 2,62 2,81 14,79 13,64 12,57 12,57 c 0,0 1,14 2,21 9,4 24,4 35,-1 0,-8 -1,-13 0,-18 0,-5 0,19 0,19 0,0 6,2 8,-5 3,-10 5,-24 -9,-28 -9,-1 -7,-2 -8,-2 -2,0 -18,0 -18,0 z"/>
                          <path style="fill:#C29B82;stroke:#693311" d="m 23,38 c 0,0 1,3 -1,5 3,4 11,8 18,0 -1,-2 -1,-2 -1,-5 0,0 -16,0 -16,0 z"/>
                          <path style="fill:#CDA68E;stroke:#693311" d="M 31,42 C 17,42 7.6,4.8 31,4.2 55,4.1 44,42 31,42 z"/>
                          <path style="fill:#553932;stroke:#311710" d="M 17,26 C 14,16 14,3.2 31,2.4 44,3.1 49,15 44,26 44,21 45,19 43,16 39,15 33,16 28,11 27,15 15,13 17,26 z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/subuser_List'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=subUser%>
                      </h2>
                      <p class="card-text">Sub User</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg  viewBox="30 10 70 100" xmlns="http://www.w3.org/2000/svg" version="1.1">
                          <path style="fill:#5F3E20;stroke:#311710" d="m 45,65 c 5,-8 0,-25 3,-31 3,-10 7,-16 16,-16 10,0 16,8 20,17 1,2 0,6 2,11 1,4 -1,8 -1,10 0,5 -1,3 2,9 -5,13 -34,10 -42,0 z"/>
                          <path style="fill:#D8933B;stroke:#2A424F" d="m 58,60 c -5,5 -18,3 -20,13 -2,6 -1,25 11,24 -1,-16 -3,-23 -3,-23 0,0 2,15 3,21 9,5 23,5 35,-1 0,-6 -1,-13 0,-18 1,-5 0,20 0,20 0,0 7,1 9,-6 2,-9 4,-22 -7,-25 -9,-3 -10,-5 -12,-5 -1,0 -16,0 -16,0 z"/>
                          <path style="fill:#DEB89F;stroke:#693311" d="m 58,54 c 0,0 1,3 0,7 3,3 10,8 16,0 -1,-4 -1,-4 -1,-7 0,0 -15,0 -15,0 z"/>
                          <path style="fill:#DBBFA8;stroke:#693311" d="M 66,59 C 52,59 43,21 66,20 86,21 79,59 66,59 z"/>
                          <path style="fill:#5F3E20" d="m 63,27 c -3,5 -7,8 -12,9 -4,1 2,-17 13,-17 5,0 13,3 15,15 -6,1 -14,-5 -16,-7"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/babyList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=babies%>
                      </h2>
                      <p class="card-text">Babies</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg  viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--twemoji" 
                        preserveAspectRatio="xMidYMid meet"><path fill="#FFDC5D" d="M36 18.5c0-1.639-.97-3.004-2.273-3.385C32.367 7.658 25.85 2 18 2C10.15 2 3.633 7.658 2.273 15.115C.97 15.496 0 16.861 0 18.5c0 1.736 1.087 3.168 2.51 3.442C4.269 28.868 10.527 34 18 34c7.473 0 13.731-5.132 15.49-12.058C34.912 21.668 36 20.236 36 18.5z"></path>
                        <path fill="#662214" d="M18 25c-3 0-4-1-4 1s2 4 4 4s4-2 4-4s-1-1-4-1z"></path><circle fill="#662214" cx="22.5" cy="18.5" r="2.5"></circle><circle fill="#662214" cx="13.5" cy="18.5" r="2.5"></circle><path fill="#FFF" d="M18 26h2v1s0 1-1 1s-1-1-1-1v-1z"></path><path fill="#EF9645" d="M17.982 11h-.031a4.362 4.362 0 0 1-3.135-1.304a3.739 3.739 0 0 1-1.076-2.847a.992.992 0 0 1 1.057-.935c.551.033.972.508.939 1.06c-.029.495.155.983.503 1.336a2.425 2.425 0 0 0 1.725.729c.653-.036 1.27-.247 1.735-.705a3.312 3.312 0 0 0 .032-4.677a4.391 4.391 0 0 0-6.202-.042a.999.999 0 1 1-1.404-1.424a6.394 6.394 0 
                          0 1 9.03.062a5.29 5.29 0 0 1-.052 7.486c-.836.826-1.945 1.261-3.121 1.261z"></path></svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/activityList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=activity%>
                      </h2>
                      <p class="card-text">Activities</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
                          <path d="M36 18H12V44H36V18Z" fill="#ffffff" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8943 11H28.1057C29.8329 11 31.365 12.1086 31.9051 13.7492L33.3045 18H14.6953L16.0949 13.7491C16.635 12.1086 18.1671 11 19.8943 11Z" 
                          stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                          <path d="M21 11V7C21 5.34315 22.3431 4 24 4C25.6569 4 27 5.34315 27 7V11" stroke="#ffffff" stroke-width="4" stroke-linecap="round"/>
                          <path d="M18.5 26V36" stroke="white" stroke-width="4" stroke-linecap="round"/>
                          </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/activityList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=customActivity%>
                      </h2>
                      <p class="card-text">Customized Activity</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg fill="#ffffff"  viewBox="-3.5 0 19 19" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg"><path d="M10.05 3.828a1.112 1.112 0 0 1 1.11 1.108v10.562a1.112 1.112 0 0 1-1.11 
                          1.108h-8.1a1.112 1.112 0 0 1-1.11-1.108V4.936a1.112 1.112 0 0 1 1.11-1.108h.415v1.108h-.414l-.002.002v10.558l.002.002h8.098l.002-.002V4.938l-.002-.002h-.414V3.828h.416zm-.98 4.076H2.82v1.108h6.25zm0 2.337H2.82v1.108h6.25zm0 
                          2.337H2.82v1.108h6.25zm-.543-8.935v1.25a.476.476 0 0 1-.475.476H3.948a.476.476 0 0 1-.475-.475v-1.25a.476.476 0 0 1 .475-.476h.697V1.87a.476.476 0 0 1 .475-.475h1.76a.476.476 0 0 1 .475.475v1.3h.697a.476.476 0 0 1 .475.474zM6.55 
                          2.67a.554.554 0 1 0-.554.554.554.554 0 0 0 .554-.554z"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/Goal_List' " style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=weekly_goals%>
                      </h2>
                      <p class="card-text">Weekly Goals</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg fill="#000000" viewBox="0 0 24 24" id="goal" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color">
                          <path id="secondary" d="M15,9l-2.5,2.5M15,6V9h3l3-3H18V3Z" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                          <path id="primary" d="M12.33,3H12a9,9,0,1,0,9,9c0-.11,0-.22,0-.33" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                          <path id="primary-2" data-name="primary" d="M16.9,13A5,5,0,1,1,11,7.1" style="fill: none; stroke: rgb(233, 230, 230); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-5 col-sm-5 col-12">
                <div class="card" onclick="location.href='/subscriptionList'" style="cursor: pointer;">
                  <div class="card-header">
                    <div>
                      <h2 class="fw-bolder mb-0">
                        <%=subscription%>
                      </h2>
                      <p class="card-text">Subscription</p>
                    </div>
                    <div class="avatar bg-light-primary p-50 m-0">
                      <div class="avatar-content">
                        <svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                          <path fill="rgb(233, 230, 230)" d="M8.2 6.8c-0.1 0-0.1-0.1-0.2-0.1v-3.1c1.2 0.1 2.2 0.6 2.2 0.6l0.9-1.8c-0.1 0-1.5-0.8-3.1-0.8v-1.6h-1v1.6c-0.8 0.2-1.4 0.5-2 0.9-0.6 0.6-1 1.4-1 2.3 0 0.7 0.2 2.3 3 3.6v3.9c-0.9-0.2-2-0.7-2.4-0.9l-1 1.7c0.2 0.1 1.8 1 3.4 1.2v1.7h1v-1.7c0 0 0 0 0 0 2.3-0.3 3.6-2.1 3.6-3.8 0-1.5-1-2.7-3.4-3.7zM7 6.2c-0.8-0.5-1-1-1-1.3 0-0.4 0.1-0.7 0.4-0.9 0.2-0.1 0.4-0.2 0.6-0.3v2.5zM8 12.3v-3.4c1.1 0.5 1.6 1.1 1.6 1.6 0 0.6-0.3 1.6-1.6 1.8z"></path>
                          </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="card card-body h-100">
                    <h3 class="m-b-0">Users</h3>
                    <div id="chart01" class="w-100"></div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card card-body h-100">
                    <h3 class="m-b-0">Babies</h3>
                    <div id="chart02" class="w-100"></div>
                  </div>
                </div>
              </div>
              <%}%>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>

<%- include('../common/footer') %>

<script>

  setTimeout(function () {
    $("div.msg").fadeOut();
  }, 2000);

  let userCounts = JSON.parse('<%= JSON.stringify(userCounts) %>'); // Convert the string to an array
  var options = {
    series: [{
      name: 'User',
      data: userCounts
    }],
    chart: {
      height: 350,
      type: 'bar',
    },
    plotOptions: {
      bar: {
        borderRadius: 10,
        dataLabels: {
          position: 'top',
        },
      }
    },
    dataLabels: {
      enabled: true,
      formatter: function (val) {
        return val;
      },
      offsetY: -20,
      style: {
        fontSize: '12px',
        colors: ["#304758"]
      }
    },

    xaxis: {
      categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      position: 'top',
      axisBorder: {
        show: false
      },
      axisTicks: {
        show: false
      },
      crosshairs: {
        fill: {
          type: 'gradient',
          gradient: {
            colorFrom: '#D8E3F0',
            colorTo: '#BED1E6',
            stops: [0, 100],
            opacityFrom: 0.4,
            opacityTo: 0.5,
          }
        }
      },
      tooltip: {
        enabled: true,
      }
    },
    yaxis: {
      axisBorder: {
        show: false
      },
      axisTicks: {
        show: false,
      },
      labels: {
        show: false,
        formatter: function (val) {
          return val;
        }
      }

    },
    title: {
      text: 'User Monthly Record in 2024',
      floating: true,
      offsetY: 330,
      align: 'center',
      style: {
        color: '#0c3d86'
      }
    }
  };
  var chart = new ApexCharts(document.querySelector("#chart01"), options);
  chart.render();
  let babyCount = JSON.parse('<%= JSON.stringify(babyCount) %>'); // Convert the string to an array
  var options = {
    series: [{
      name: 'User',
      data: babyCount
    }],
    chart: {
      height: 350,
      type: 'bar',
    },
    plotOptions: {
      bar: {
        borderRadius: 10,
        dataLabels: {
          position: 'top',
        },
      }
    },
    dataLabels: {
      enabled: true,
      formatter: function (val) {
        return val;
      },
      offsetY: -20,
      style: {
        fontSize: '12px',
        colors: ["#304758"]
      }
    },

    xaxis: {
      categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      position: 'top',
      axisBorder: {
        show: false
      },
      axisTicks: {
        show: false
      },
      crosshairs: {
        fill: {
          type: 'gradient',
          gradient: {
            colorFrom: '#D8E3F0',
            colorTo: '#BED1E6',
            stops: [0, 100],
            opacityFrom: 0.4,
            opacityTo: 0.5,
          }
        }
      },
      tooltip: {
        enabled: true,
      }
    },
    yaxis: {
      axisBorder: {
        show: false
      },
      axisTicks: {
        show: false,
      },
      labels: {
        show: false,
        formatter: function (val) {
          return val;
        }
      }

    },
    title: {
      text: 'Baby Monthly Record in 2024',
      floating: true,
      offsetY: 330,
      align: 'center',
      style: {
        color: '#0c3d86'
      }
    }
  };
  var chart = new ApexCharts(document.querySelector("#chart02"), options);
  chart.render();
</script>