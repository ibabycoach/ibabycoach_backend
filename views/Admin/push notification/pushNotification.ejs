<%- include('../common/header') %>
<%- include('../common/sidebar') %>


<!-- BEGIN: Content-->
<div class="app-content content ">

  <div class="content-wrapper container-xxl p-0">
    <div class="content-body">
      <section id="multiple-column-form">
        <form action="/push-notification" method="post" id="token_form">
          <div class="row">
            <div class="col-md-10 mx-auto">
              <div class="form-group row my-3">
                <label for="users" class="col-sm-12 col-form-label">Users</label>
                <div class="col-10">
                  <select id="users" class="form-control js-example-basic-multiple" required name="users" multiple="multiple">
                    <% for(let i in getUser){ %>
                    <option value="<%= getUser[i]._id %>"><%= getUser[i].name %> <%= getUser[i].sur_name %></option>
                    <%  } %>
                  </select>
                </div>
                <div class="custom-control custom-checkbox col-2 mt-1">
                  <input type="checkbox" class="custom-control-input" id="allUser">
                  <label class="custom-control-label" for="allUser">All</label>
                </div>
              </div>
              <div class="form-group row">
                <label for="message" class="col-sm-12 col-form-label">Message</label>
                <div class="col-sm-12">
                  <textarea class="form-control" name="message" id="message" rows="4"></textarea>
                </div>
              </div>
              <div class="form-group row  pt-2  ">
                <div class="col-sm-9 ms-auto">

                  <button class="btn btn-primary" type="submit">Send</button>
                  <div class="col-sm-9">

                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </section>
    </div>
  </div>
</div>
<div class="sidenav-overlay"></div>
<div class="drag-target"></div>
<%- include('../common/footer') %>


<script src="../../../javascripts/sendToken.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
  $(document).ready(function() {
    $('.js-example-basic-multiple').select2({
      placeholder: 'Select an option'
    });

    $("#allUser").click(function() {
      if ($("#allUser").is(':checked')) {
        $("#users > option").prop("selected", true);
        $("#users").trigger("change");
      } else {
        $("#users > option").prop("selected", false);
        var selected = $("#user_id").val();
        if (!selected || selected.length == 0) {
          $("#users").val([]).trigger("change");
        } else {
          $("#users").trigger("change");
        }
      }
    });

  });
</script>